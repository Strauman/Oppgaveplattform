%!TEX root = ../main.tex
\newcommand{\predocument}[0]{
\ifshowtoc
\ifGenerateTOC
  \tableofcontents
\else
  \makeatletter
    {\Large\contentsname\par}
    \input{\platformdir/generated.toc}
  \makeatother
\fi
  \thispagestyle{empty}
  \addtocounter{page}{-1}
  \clearpage
\fi
}
\newcommand{\buildset}[0]{
  \ifDoKnittr
    \IfFileExists{\ProblemSetDirectory\setNo.Rnw}{
      \immediate\write18{cd \ProblemSetDirectory; R -e 'library(knitr);knit("\setNo.Rnw")'}
      \IfFileExists{\ProblemSetDirectory\setNo}{}{
        \newpage
        {\Huge\color{red}Something wen wrong when knitring \setNo.Rnw}
        \newpage
      }
    }{}
  \fi
    \IfFileExists{\ProblemSetDirectory\setNo}{
      \ifResetProblemCounterOnSet
      \setcounter{ProblemCounter}{0}
      \fi
      \ifBlankBeforeNew
        \IfInteger{\setNos}{}{%Building more than one set
          %Building an actual set
          \IfInteger{\setNo}{\null\thispagestyle{empty}\addtocounter{page}{-1}\newpage}{}
        }
      \fi
      %% uitTitle defined in pagestyle
      \uitTitle
      \input{\ProblemSetDirectory\setNo}
      \clearpage

    }{
      \thispagestyle{empty}
      \begin{center}
          \tr{setnotfound}
      \end{center}
      \addtocounter{page}{-1}
      \clearpage
    }

}
\newcommand{\readTheReadme}[0]{
  \ifBuildReadme\else
  % \thispagestyle{empty}
  % {\Large Du m√• lese README.pdf. Her er den (Neste sidene)}
  \rfoot{}\cfoot{}\lhead{}
  \chead{REA-0101 Reading the readme}
  \renewcommand{\footrulewidth}{0pt}
  \fi
  \includepdf[pages=-, pagecommand={}]{\platformdir/README.pdf}
  % \end{center}
}
\begin{document}
  \ifBuildReadme\readTheReadme\fi
  \ifx\setNos\empty
    \ifBuildReadme\else\readTheReadme\fi
  \else
    \ifBuildIntent
      \def\setNo{intent}
      \thispagestyle{empty}
      \addtocounter{page}{-1}
      \buildset
    \fi
    \ifBuildOverview
      \def\setNo{overview}
      \thispagestyle{empty}
      \addtocounter{page}{-1}
      \buildset
    \fi
    \foreach \setNo [count=\scount] in \setNos{
      \buildset
    }
\fi
\ifBibliography
  \bibliographystyle{\bibStyle}
  \bibliography{\bibliographyFile}
\fi

\end{document}
